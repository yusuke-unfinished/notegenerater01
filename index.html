<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Content Factory Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Marked.js for Markdown rendering simulation -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #0F172A; color: #E2E8F0; }
        
        /* Automation Line Animation */
        .flow-line {
            position: absolute;
            background: linear-gradient(90deg, #3B82F6, #10B981);
            height: 4px;
            width: 0%;
            transition: width 1s ease-in-out;
        }
        .flow-active { width: 100%; }

        /* Card Styles */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }

        /* Typing & Writing Effects */
        .typing::after { content: '|'; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        .writing-cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background-color: #10B981;
            animation: blink 0.8s infinite;
            vertical-align: middle;
        }

        /* Markdown Styles Simulation */
        .markdown-body h2 { font-size: 1.5em; font-weight: bold; color: #fff; margin-top: 1.5em; margin-bottom: 0.5em; border-bottom: 1px solid #334155; padding-bottom: 0.3em; }
        .markdown-body h3 { font-size: 1.2em; font-weight: bold; color: #e2e8f0; margin-top: 1.2em; margin-bottom: 0.5em; }
        .markdown-body p { margin-bottom: 1em; line-height: 1.8; color: #cbd5e1; }
        .markdown-body ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
        .markdown-body blockquote { border-left: 4px solid #3B82F6; padding-left: 1em; color: #94a3b8; font-style: italic; background: rgba(59, 130, 246, 0.1); padding: 0.5em 1em; border-radius: 0 4px 4px 0; }
        .markdown-body strong { color: #10B981; font-weight: 700; }
    </style>
    <!-- Chosen Palette: Pro Automation
         Background: #0F172A (Deep Navy)
         Primary: #10B981 (Emerald - Completion/Writing)
         Secondary: #3B82F6 (Blue - Logic/Structure)
    -->

    <!-- Application Structure Plan:
         1. Two-Step Automation:
            - Step 1: Structure (Outline) & Threads Hook.
            - Step 2: Full Content Generation (The new feature).
         2. Live Writing Demo:
            - Simulates the AI "typing" out the article paragraph by paragraph.
         3. Dynamic Inputs:
            - User topic drives the "fake" content generation to make it feel real.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="border-b border-gray-700 sticky top-0 z-50 bg-[#0F172A]/90 backdrop-blur">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <h1 class="text-lg font-bold tracking-wide flex items-center text-white">
                <span class="bg-gradient-to-r from-blue-600 to-green-500 text-white px-2 py-1 rounded text-xs mr-2">PRO</span>
                Content Factory
            </h1>
            <div class="text-xs text-gray-400 hidden sm:block">è¨˜äº‹å…¨æ–‡åŸ·ç­†ï¼†æŠ•ç¨¿è‡ªå‹•åŒ–</div>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- Section 1: Input & Control -->
        <section class="space-y-6">
            <div class="max-w-4xl mx-auto text-center mb-8">
                <h2 class="text-2xl font-bold text-white mb-2">å®Œå…¨è‡ªå‹•åŒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ</h2>
                <p class="text-gray-400 text-sm">ãƒ†ãƒ¼ãƒã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€ã€Œæ§‹æˆæ¡ˆã€ã‹ã‚‰ã€Œè¨˜äº‹å…¨æ–‡ã€ã€ãã—ã¦ã€Œé›†å®¢ç”¨ãƒã‚¹ãƒˆã€ã¾ã§ã‚’ä¸€æ°—ã«ç”Ÿæˆã—ã¾ã™ã€‚</p>
            </div>

            <!-- Input Area -->
            <div class="glass-panel p-6 rounded-xl shadow-lg border-t-4 border-blue-500">
                <label class="block text-sm font-bold text-gray-300 mb-2">è¨˜äº‹ãƒ†ãƒ¼ãƒ (Topic)</label>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="topic-input" placeholder="ä¾‹ï¼šå€‹äººé–‹ç™ºè€…ã®ãŸã‚ã®AIãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°å…¥é–€" class="flex-grow bg-gray-800 border border-gray-600 text-white rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 transition-colors">
                    <button id="btn-outline" onclick="generateOutline()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all flex items-center justify-center min-w-[180px]">
                        <span>Step 1: æ§‹æˆæ¡ˆä½œæˆ</span>
                    </button>
                    <button id="btn-full" onclick="generateFullArticle()" class="hidden bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all items-center justify-center min-w-[180px]">
                        <span>Step 2: å…¨æ–‡åŸ·ç­† âœï¸</span>
                    </button>
                </div>
            </div>

            <!-- Status Bar -->
            <div class="relative h-8 w-full flex items-center justify-center overflow-hidden mt-4">
                <div class="h-1 w-full bg-gray-700 rounded-full"></div>
                <div id="progress-bar" class="flow-line rounded-full"></div>
                <div class="absolute bg-[#0F172A] px-4 text-xs text-blue-400 font-mono" id="status-text">READY TO CREATE</div>
            </div>
        </section>

        <!-- Section 2: Workspace (Split View) -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 min-h-[600px]">
            
            <!-- Editor Column (Note) -->
            <div class="flex flex-col space-y-4">
                <div class="flex items-center justify-between text-gray-400 text-sm px-2">
                    <span class="font-bold flex items-center"><span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>Note Editor</span>
                    <span id="word-count" class="text-xs bg-gray-800 px-2 py-1 rounded">0 chars</span>
                </div>
                
                <div id="note-container" class="glass-panel flex-grow rounded-xl p-8 overflow-y-auto max-h-[600px] border border-gray-700 relative">
                    <!-- Placeholder -->
                    <div id="note-placeholder" class="absolute inset-0 flex items-center justify-center flex-col opacity-30 pointer-events-none">
                        <svg class="w-16 h-16 text-gray-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                        <span class="text-gray-400">Waiting for outline...</span>
                    </div>
                    
                    <!-- Content Area -->
                    <div id="note-content" class="markdown-body text-gray-300 text-sm hidden"></div>
                </div>
            </div>

            <!-- Distribution Column (Threads) -->
            <div class="flex flex-col space-y-4">
                <div class="flex items-center justify-between text-gray-400 text-sm px-2">
                    <span class="font-bold flex items-center"><span class="w-2 h-2 bg-white rounded-full mr-2"></span>Threads Preview</span>
                    <span class="text-xs bg-gray-800 px-2 py-1 rounded">Auto-Generated</span>
                </div>

                <div class="glass-panel flex-grow rounded-xl p-6 border border-gray-700 relative bg-black/40">
                    <div id="threads-content" class="space-y-4">
                        <div class="opacity-30 text-center mt-20 text-gray-500">
                            è¨˜äº‹å†…å®¹ã«åˆã‚ã›ã¦<br>æœ€é©ãªã‚¹ãƒ¬ãƒƒãƒ‰æŠ•ç¨¿ã‚’ç”Ÿæˆã—ã¾ã™
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- Templates ---
        const getTopic = () => document.getElementById('topic-input').value || "AIãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°";

        // Step 1: Outline Template
        const outlineTemplate = (topic) => `
# ã€ä¿å­˜ç‰ˆã€‘${topic}ã§æˆæœã‚’å‡ºã™ãŸã‚ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰

## ã¯ã˜ã‚ã«
- **èª­è€…ã¸ã®å•ã„ã‹ã‘**: ãªãœä»Šã€${topic}ãŒé‡è¦ãªã®ã‹ï¼Ÿ
- **è¨˜äº‹ã®ã‚´ãƒ¼ãƒ«**: ã“ã®è¨˜äº‹ã‚’èª­ã‚ã°ã€æ˜æ—¥ã‹ã‚‰å®Ÿè·µã§ãã‚‹çŠ¶æ…‹ã«ãªã‚‹ã€‚

## 1. ${topic}ãŒå¿…è¦ãªã€Œæœ¬å½“ã®ç†ç”±ã€
- å¤šãã®äººãŒèª¤è§£ã—ã¦ã„ã‚‹ãƒã‚¤ãƒ³ãƒˆ
- AIã‚’ä½¿ã‚ãªã„ã¨æã‚’ã™ã‚‹æ™‚é–“ã®è¨ˆç®—ï¼ˆå…·ä½“çš„ãªæ•°å­—ï¼‰

## 2. å…·ä½“çš„ãªå®Ÿè·µ3ã‚¹ãƒ†ãƒƒãƒ—
- **Step 1**: æº–å‚™ã™ã‚‹ã‚‚ã®ï¼ˆãƒ„ãƒ¼ãƒ«é¸å®šï¼‰
- **Step 2**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è¨­è¨ˆï¼ˆã‚³ãƒ”ãƒšç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
- **Step 3**: è‡ªå‹•åŒ–ã¸ã®çµ„ã¿è¾¼ã¿

## 3. ã‚ˆãã‚ã‚‹å¤±æ•—ã¨å›é¿ç­–
- åˆå¿ƒè€…ãŒé™¥ã‚‹ã€Œå“è³ªã®ç½ ã€
- äººé–“ã®æ‰‹ãŒåŠ ã‚ã‚‹ã¹ããƒã‚¤ãƒ³ãƒˆï¼ˆç·¨é›†é•·ã®å½¹å‰²ï¼‰

## ãŠã‚ã‚Šã«
- ã¾ãšã¯ä¸€ã¤ã ã‘è©¦ã—ã¦ã¿ã‚ˆã†
- **ç‰¹å…¸**: å®Ÿè·µãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé…å¸ƒï¼ˆæœ‰æ–™ã‚¨ãƒªã‚¢ï¼‰
`;

        // Step 2: Full Article Parts (Simulated)
        const articleParts = (topic) => [
            `# ã€ä¿å­˜ç‰ˆã€‘${topic}ã§æˆæœã‚’å‡ºã™ãŸã‚ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰\n\n`,
            
            `## ã¯ã˜ã‚ã«\n`,
            `ã€Œ${topic}ã€ã«ã¤ã„ã¦ã€ã‚ãªãŸã¯ã©ã‚“ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ\nå¤šãã®äººã¯ã€Œé›£ã—ãã†ã€ã€Œã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®é ˜åŸŸã ã€ã¨æ•¬é ã—ãŒã¡ã§ã™ã€‚ã—ã‹ã—ã€æ–­è¨€ã—ã¾ã™ã€‚**ä»Šã™ãå§‹ã‚ãªã‘ã‚Œã°ã€ã‚ãªãŸã®ãƒ“ã‚¸ãƒã‚¹ã¯3å¹´ä»¥å†…ã«é™³è…åŒ–ã—ã¾ã™ã€‚**\n\n`,
            `ã“ã®è¨˜äº‹ã§ã¯ã€ç²¾ç¥è«–ã§ã¯ãªãã€å…·ä½“çš„ãªãƒ„ãƒ¼ãƒ«ã¨æ•°å­—ã‚’ç”¨ã„ã¦ã€èª°ã§ã‚‚å†ç¾å¯èƒ½ãª${topic}ã®ãƒã‚¦ãƒã‚¦ã‚’å®Œå…¨å…¬é–‹ã—ã¾ã™ã€‚\n\n`,

            `## 1. ${topic}ãŒå¿…è¦ãªã€Œæœ¬å½“ã®ç†ç”±ã€\n`,
            `ãªãœä»Šã€ã“ã‚Œã»ã©ã¾ã§ã«${topic}ãŒå«ã°ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚\nç†ç”±ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã€‚**ã€Œãƒ¬ãƒãƒ¬ãƒƒã‚¸ï¼ˆã¦ã“ã®åŸç†ï¼‰ã€ãŒåŠ¹ãã‹ã‚‰ã§ã™ã€‚**\n\n`,
            `å¾“æ¥ã€1ã¤ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œã‚‹ã®ã«3æ™‚é–“ã‹ã‹ã£ã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€AIã¨é©åˆ‡ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã‚ã°ã€ãã‚Œã¯**15åˆ†**ã«çŸ­ç¸®ã•ã‚Œã¾ã™ã€‚ç©ºã„ãŸ2æ™‚é–“45åˆ†ã§ã€ã‚ãªãŸã¯ã€Œæˆ¦ç•¥ã€ã‚’ç·´ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n`,
            `> **é‡è¦:** AIã¯ã€Œæ‰‹æŠœãã€ã®ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã¯ãªãã€ã€Œæœ¬è³ªã«å‘ãåˆã†æ™‚é–“ã€ã‚’ä½œã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚\n\n`,

            `## 2. å…·ä½“çš„ãªå®Ÿè·µ3ã‚¹ãƒ†ãƒƒãƒ—\n`,
            `ã§ã¯ã€å…·ä½“çš„ã«ã©ã†é€²ã‚ã‚Œã°ã„ã„ã®ã‹ã€‚ä»¥ä¸‹ã®3ã‚¹ãƒ†ãƒƒãƒ—ã§è§£èª¬ã—ã¾ã™ã€‚\n\n`,
            `### Step 1: ãƒ„ãƒ¼ãƒ«é¸å®š\n`,
            `ã¾ãšã¯åŸºç›¤ã¨ãªã‚‹LLMã‚’é¸ã³ã¾ã™ã€‚åŸºæœ¬ã¯ChatGPT (GPT-4) ã§ååˆ†ã§ã™ãŒã€APIé€£æºã‚’è€ƒãˆã‚‹ãªã‚‰Claude 3.5 Sonnetã‚‚å„ªç§€ã§ã™ã€‚\n\n`,
            `### Step 2: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è¨­è¨ˆ\n`,
            `ã“ã“ãŒæœ€å¤§ã®è‚ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚\n\n`,
            `\`\`\`text\nã‚ãªãŸã¯ãƒ—ãƒ­ã®ãƒãƒ¼ã‚±ã‚¿ãƒ¼ã§ã™ã€‚\nä»¥ä¸‹ã®ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã«ã‚‚ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¦ãã ã•ã„ã€‚\nåˆ¶ç´„æ¡ä»¶ï¼š\n- å°‚é–€ç”¨èªã‚’ä½¿ã‚ãªã„\n- å…·ä½“ä¾‹ã‚’å¿…ãšå…¥ã‚Œã‚‹\n\`\`\`\n\n`,
            
            `## 3. ã‚ˆãã‚ã‚‹å¤±æ•—ã¨å›é¿ç­–\n`,
            `åˆå¿ƒè€…ãŒé™¥ã‚ŠãŒã¡ãªã®ãŒ**ã€ŒAIã®å‡ºåŠ›ã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã‚‹ã€**ã“ã¨ã§ã™ã€‚\nã“ã‚Œã¯çµ¶å¯¾ã«NGã§ã™ã€‚AIã¯ã‚ãã¾ã§ã€Œå„ªç§€ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã€ã€‚æœ€çµ‚çš„ãªè²¬ä»»ï¼ˆãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯ã€ãƒˆãƒ¼ãƒ³ï¼†ãƒãƒŠãƒ¼ã®èª¿æ•´ï¼‰ã¯ã€ç·¨é›†é•·ã§ã‚ã‚‹ã‚ãªãŸãŒè² ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n\n`,
            `## ãŠã‚ã‚Šã«\n`,
            `ã“ã“ã¾ã§èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚\n${topic}ã¯ã€ä¸€åº¦ä»•çµ„ã¿ã‚’ä½œã‚Œã°ã€ã‚ãªãŸã®è³‡ç”£ã¨ã—ã¦åƒãç¶šã‘ã¾ã™ã€‚\n\n`,
            `--- \n**ã“ã“ã‹ã‚‰å…ˆã¯æœ‰æ–™ã‚¨ãƒªã‚¢ã§ã™**\n\nç§ãŒå®Ÿéš›ã«ä½¿ç”¨ã—ã¦ã„ã‚‹**ã€Œç§˜ä¼ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé›†ï¼ˆ20é¸ï¼‰ã€**ã¨ã€ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ãˆã‚‹**ã€Œè‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€**ã‚’é…å¸ƒã—ã¾ã™ã€‚\n`
        ];

        // Threads Post Template
        const threadsTemplate = (topic) => `
            <!-- Post 1 -->
            <div class="bg-black p-4 rounded-lg border border-gray-800 mb-3 animate-fade-in-up">
                <div class="flex items-center mb-2">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-purple-500 to-orange-500 mr-3"></div>
                    <div class="text-sm font-bold text-white">Your Name <span class="text-gray-500 font-normal">@your_id</span></div>
                </div>
                <p class="text-gray-200 text-sm leading-relaxed">
                    å¤šãã®äººãŒã€Œ${topic}ã€ã§æŒ«æŠ˜ã™ã‚‹ç†ç”±ã¯ã€ãƒ„ãƒ¼ãƒ«é¸ã³ã§æ¶ˆè€—ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚<br><br>
                    å®Ÿã¯ã€ä½¿ã†ã¹ããƒ„ãƒ¼ãƒ«ã¯ãŸã£ãŸ1ã¤ã§ã„ã„ã€‚<br>
                    åƒ•ãŒæœˆ50ä¸‡ç¨¼ããŸã‚ã«ã‚„ã£ã¦ã„ã‚‹ã€Œã‚·ãƒ³ãƒ—ãƒ«ãªè‡ªå‹•åŒ–ãƒ•ãƒ­ãƒ¼ã€ã‚’å›³è§£ã—ã¾ã—ãŸã€‚ğŸ§µğŸ‘‡
                </p>
                <div class="mt-3 h-32 bg-gray-800 rounded flex items-center justify-center text-gray-500 text-xs border border-gray-700">
                    [å›³è§£ç”»åƒ: è‡ªå‹•åŒ–ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ]
                </div>
            </div>

            <!-- Post 2 -->
            <div class="bg-black p-4 rounded-lg border border-gray-800 mb-3 ml-6 border-l-2 border-gray-700 animate-fade-in-up" style="animation-delay: 0.5s">
                <p class="text-gray-200 text-sm leading-relaxed">
                    é‡è¦ãªã®ã¯ã€ŒAIã«æ›¸ã‹ã›ã‚‹ã€ã“ã¨ã§ã¯ãªãã€ã€ŒAIã«æ§‹æˆã•ã›ã‚‹ã€ã“ã¨ã§ã™ã€‚<br><br>
                    è¨˜äº‹ã®å“è³ªã¯9å‰²ãŒã€Œæ§‹æˆã€ã§æ±ºã¾ã‚Šã¾ã™ã€‚<br>
                    ã“ã“ã‚’AIã«ä»»ã›ã€äººé–“ã¯ã€Œç†±é‡ã€ã‚’è¶³ã™ã€‚<br>
                    ã“ã®åˆ†æ¥­ã“ããŒæœ€å¼·ã®æ™‚çŸ­è¡“ã§ã™ã€‚
                </p>
            </div>

            <!-- Post 3 -->
            <div class="bg-black p-4 rounded-lg border border-gray-800 ml-6 border-l-2 border-gray-700 animate-fade-in-up" style="animation-delay: 1s">
                <p class="text-gray-200 text-sm leading-relaxed">
                    å…·ä½“çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã€ãã®ã¾ã¾ä½¿ãˆã‚‹æ§‹æˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’Noteã«ã¾ã¨ã‚ã¾ã—ãŸã€‚<br><br>
                    ã“ã‚Œã‚’è¦‹ã‚‹ã ã‘ã§ã€æ˜æ—¥ã‹ã‚‰ã®è¨˜äº‹ä½œæˆæ™‚é–“ãŒåŠåˆ†ã«ãªã‚Šã¾ã™ã€‚<br><br>
                    ğŸ”— note.com/your-id/article...
                </p>
            </div>
        `;

        // --- Logic ---

        function setStatus(text, colorClass = "text-blue-400") {
            const status = document.getElementById('status-text');
            status.innerText = text;
            status.className = `absolute bg-[#0F172A] px-4 text-xs font-mono font-bold ${colorClass} typing`;
        }

        function updateProgressBar(active) {
            const bar = document.getElementById('progress-bar');
            if(active) bar.classList.add('flow-active');
            else bar.classList.remove('flow-active');
        }

        // Step 1: Generate Outline
        function generateOutline() {
            const topic = getTopic();
            const btnOutline = document.getElementById('btn-outline');
            const noteContent = document.getElementById('note-content');
            const placeholder = document.getElementById('note-placeholder');

            btnOutline.disabled = true;
            btnOutline.classList.add('opacity-50');
            updateProgressBar(true);
            setStatus("AI AGENT: STRUCTURING OUTLINE...", "text-yellow-400");

            setTimeout(() => {
                placeholder.classList.add('hidden');
                noteContent.classList.remove('hidden');
                
                // Render Outline Markdown
                noteContent.innerHTML = marked.parse(outlineTemplate(topic));
                
                setStatus("OUTLINE GENERATED. READY TO WRITE.", "text-green-400");
                updateProgressBar(false);

                // Show Step 2 Button
                const btnFull = document.getElementById('btn-full');
                btnFull.classList.remove('hidden');
                btnFull.classList.add('flex', 'animate-bounce-short');
                
                // Update Word Count
                document.getElementById('word-count').innerText = `${outlineTemplate(topic).length} chars`;

            }, 1500);
        }

        // Step 2: Generate Full Article
        function generateFullArticle() {
            const topic = getTopic();
            const btnFull = document.getElementById('btn-full');
            const noteContent = document.getElementById('note-content');
            const threadsContent = document.getElementById('threads-content');

            btnFull.disabled = true;
            btnFull.classList.add('opacity-50');
            updateProgressBar(true);
            setStatus("AI AGENT: WRITING FULL ARTICLE...", "text-green-500");

            // Clear previous outline to start fresh writing simulation or append? 
            // Let's clear and rewrite for effect
            noteContent.innerHTML = '';
            
            const parts = articleParts(topic);
            let currentPart = 0;

            function writeNextPart() {
                if (currentPart < parts.length) {
                    // Create a container for the new part to fade in
                    const div = document.createElement('div');
                    div.innerHTML = marked.parse(parts[currentPart]);
                    div.className = "animate-fade-in mb-4";
                    
                    // Add a cursor
                    const cursor = document.createElement('span');
                    cursor.className = "writing-cursor";
                    div.appendChild(cursor);
                    
                    noteContent.appendChild(div);
                    
                    // Scroll to bottom
                    const container = document.getElementById('note-container');
                    container.scrollTop = container.scrollHeight;

                    // Remove cursor from previous part
                    const prevCursor = noteContent.querySelectorAll('.writing-cursor');
                    if(prevCursor.length > 1) {
                        prevCursor[0].remove();
                    }

                    // Update stats
                    document.getElementById('word-count').innerText = `${noteContent.innerText.length} chars`;

                    currentPart++;
                    // Variable typing speed simulation
                    setTimeout(writeNextPart, 800); 
                } else {
                    // Finished Writing Article
                    document.querySelectorAll('.writing-cursor').forEach(el => el.remove());
                    setStatus("ARTICLE COMPLETE. GENERATING THREADS...", "text-white");
                    
                    // Trigger Threads Generation
                    setTimeout(generateThreads, 1000);
                }
            }

            writeNextPart();
        }

        function generateThreads() {
            const topic = getTopic();
            const threadsContent = document.getElementById('threads-content');
            
            threadsContent.innerHTML = threadsTemplate(topic);
            
            setStatus("ALL TASKS COMPLETED SUCCESSFULLY", "text-blue-400");
            updateProgressBar(false);
        }

        // --- Animations CSS (Tailwind config doesn't cover custom keyframes easily in CDN) ---
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in-up { animation: fadeInUp 0.5s ease-out forwards; opacity: 0; }
            
            @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
            .animate-fade-in { animation: fadeIn 0.5s ease-out; }

            @keyframes bounceShort {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-5px); }
            }
            .animate-bounce-short { animation: bounceShort 0.5s ease-in-out 2; }
        `;
        document.head.appendChild(styleSheet);

    </script>
</body>
</html>
